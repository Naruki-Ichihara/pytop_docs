"use strict";(self.webpackChunkpytop_docs=self.webpackChunkpytop_docs||[]).push([[976],{619:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>l,metadata:()=>r,toc:()=>m});var n=a(4848),i=a(8453);const l={sidebar_position:1},t="Introduction",r={id:"intro",title:"Introduction",description:"Pytop is a powerful tool designed to extend the capabilities of FEniCS for topology optimization. It provides robust tools for advanced computational design and supports multiphysics simulations. Pytop is fully compatible with MPI, allowing for efficient monitoring of parallel applications.",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/pytop_docs/docs/intro",draft:!1,unlisted:!1,editUrl:"https://github.com/Naruki-Ichihara/pytop_docs/tree/main/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Getting started",permalink:"/pytop_docs/docs/category/getting-started"}},c={},m=[{value:"General Optimization Form",id:"general-optimization-form",level:2},{value:"NLOpt <code>opt</code> class",id:"nlopt-opt-class",level:2},{value:"Visualization",id:"visualization",level:2},{value:"Container",id:"container",level:2},{value:"Installation",id:"installation",level:2},{value:"MPI parallelization",id:"mpi-parallelization",level:2},{value:"Working with pygmsh",id:"working-with-pygmsh",level:2}];function o(s){const e={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",munder:"munder",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",...(0,i.R)(),...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(e.p,{children:"Pytop is a powerful tool designed to extend the capabilities of FEniCS for topology optimization. It provides robust tools for advanced computational design and supports multiphysics simulations. Pytop is fully compatible with MPI, allowing for efficient monitoring of parallel applications."}),"\n",(0,n.jsx)(e.h2,{id:"general-optimization-form",children:"General Optimization Form"}),"\n",(0,n.jsx)(e.p,{children:"This software scopes following general optimization form:"}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsxs)(e.munder,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"min"}),(0,n.jsx)(e.mo,{children:"\u2061"})]}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"d"})]}),(0,n.jsx)(e.mi,{children:"F"}),(0,n.jsx)(e.mo,{stretchy:"false",children:"("}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"d"}),(0,n.jsx)(e.mo,{separator:"true",children:","}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"u"}),(0,n.jsx)(e.mo,{stretchy:"false",children:")"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mo,{children:"\u222b"}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u03a9"})]}),(0,n.jsx)(e.mi,{children:"f"}),(0,n.jsx)(e.mo,{stretchy:"false",children:"("}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"d"}),(0,n.jsx)(e.mo,{separator:"true",children:","}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"u"}),(0,n.jsx)(e.mo,{stretchy:"false",children:")"}),(0,n.jsx)(e.mtext,{children:"\xa0"}),(0,n.jsx)(e.mi,{children:"d"}),(0,n.jsx)(e.mi,{children:"V"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\min_{\\bm d} F(\\bm d, \\bm u) = \\int_\\Omega f(\\bm d, \\bm u) \\ dV"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.5021em",verticalAlign:"-0.7521em"}}),(0,n.jsx)(e.span,{className:"mop op-limits",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,n.jsxs)(e.span,{style:{top:"-2.3479em",marginLeft:"0em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:(0,n.jsx)(e.span,{className:"mord boldsymbol mtight",children:"d"})})})})})]}),(0,n.jsxs)(e.span,{style:{top:"-3em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{className:"mop",children:"min"})})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.7521em"},children:(0,n.jsx)(e.span,{})})})]})}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),(0,n.jsx)(e.span,{className:"mopen",children:"("}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"d"})})}),(0,n.jsx)(e.span,{className:"mpunct",children:","}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"u"})})}),(0,n.jsx)(e.span,{className:"mclose",children:")"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"2.2719em",verticalAlign:"-0.9119em"}}),(0,n.jsxs)(e.span,{className:"mop",children:[(0,n.jsx)(e.span,{className:"mop op-symbol large-op",style:{marginRight:"0.44445em",position:"relative",top:"-0.0011em"},children:"\u222b"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"-0.4336em"},children:(0,n.jsxs)(e.span,{style:{top:"-1.7881em",marginLeft:"-0.4445em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:"\u03a9"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.9119em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,n.jsx)(e.span,{className:"mopen",children:"("}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"d"})})}),(0,n.jsx)(e.span,{className:"mpunct",children:","}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"u"})})}),(0,n.jsx)(e.span,{className:"mclose",children:")"}),(0,n.jsx)(e.span,{className:"mspace",children:"\xa0"}),(0,n.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"})]})]})]})}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"G"}),(0,n.jsx)(e.mi,{children:"j"})]}),(0,n.jsx)(e.mo,{stretchy:"false",children:"("}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"d"}),(0,n.jsx)(e.mo,{separator:"true",children:","}),(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"u"}),(0,n.jsx)(e.mo,{stretchy:"false",children:")"}),(0,n.jsx)(e.mo,{children:"\u2264"}),(0,n.jsx)(e.mn,{children:"0"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"G_j(\\bm d, \\bm u) \\leq 0"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mopen",children:"("}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"d"})})}),(0,n.jsx)(e.span,{className:"mpunct",children:","}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"u"})})}),(0,n.jsx)(e.span,{className:"mclose",children:")"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"\u2264"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(e.span,{className:"mord",children:"0"})]})]})]})}),"\n",(0,n.jsxs)(e.p,{children:["where ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u03a9"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Omega"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(e.span,{className:"mord",children:"\u03a9"})]})})]})," is the design domain and ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"u"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\bm u"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.4444em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"u"})})})]})})]})," represents specific fields that satisfy governing equations for any physics defined in ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u03a9"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Omega"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(e.span,{className:"mord",children:"\u03a9"})]})})]}),". For example, ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"u"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\bm u"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.4444em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"u"})})})]})})]})," is the displacement vector in an elastic deformation problem. ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{children:"F"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"F"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"})]})})]})," is the functional that represents the objective of the optimization. ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{mathvariant:"bold-italic",children:"d"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\bm d"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord boldsymbol",children:"d"})})})]})})]})," is the design vector, and ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"G"}),(0,n.jsx)(e.mi,{children:"j"})]})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"G_j"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,n.jsx)(e.span,{})})})]})})]})]})})]})," are the functionals representing the constraints."]}),"\n",(0,n.jsxs)(e.h2,{id:"nlopt-opt-class",children:["NLOpt ",(0,n.jsx)(e.code,{children:"opt"})," class"]}),"\n",(0,n.jsxs)(e.p,{children:["This software is designed to construct the ",(0,n.jsx)(e.code,{children:"nlopt.opt"})," class in ",(0,n.jsx)(e.a,{href:"https://nlopt.readthedocs.io/en/latest/NLopt_Python_Reference/",children:"NLOpt"})," Python interface.\r\nYou define design variables as ",(0,n.jsx)(e.code,{children:"DesignVariables"})," class and optimization problem with ",(0,n.jsx)(e.code,{children:"PloblemStatement"})," class. Then, extended ",(0,n.jsx)(e.code,{children:"nlopt.opt"})," class will be defined using ",(0,n.jsx)(e.code,{children:"NloptOptimizer"})," class with\r\n",(0,n.jsx)(e.code,{children:"DesignVariables"})," and ",(0,n.jsx)(e.code,{children:"PloblemStatement"}),". Some local gradient-based optimizers in Nlopt are available, including ",(0,n.jsx)(e.strong,{children:"GCMMA"}),", ",(0,n.jsx)(e.strong,{children:"SLSQP"}),", and ",(0,n.jsx)(e.strong,{children:"CCSA"}),". Please refer detail of each algorithms in ",(0,n.jsx)(e.a,{href:"https://nlopt.readthedocs.io/en/latest/NLopt_Algorithms/",children:"NLopt algorithms"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:"visualization",children:"Visualization"}),"\n",(0,n.jsxs)(e.p,{children:["Currently, this software does not include unique vilualization methods. However, The XDMF and H5 files can be exported. XDMF file can be visualized the VTK-based visualization software, like ",(0,n.jsx)(e.a,{href:"https://www.paraview.org/",children:"paraview"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:"container",children:"Container"}),"\n",(0,n.jsxs)(e.p,{children:["We provide a container for this repository. The container includes python 3.11, FEniCS bundles, and NLOpt with python interface.\r\nThe container is avaiable in ",(0,n.jsx)(e.a,{href:"https://hub.docker.com/repository/docker/ichiharanaruki/pytop/general",children:"dockerhub"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(e.p,{children:"To install Pytop, you need to have Python and FEniCS installed on your system. You can install Pytop via pip:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:"pip install git+https://github.com/Naruki-Ichihara/pytop.git@main\n"})}),"\n",(0,n.jsxs)(e.p,{children:["More detailed installation can be found in ",(0,n.jsx)(e.a,{href:"/docs/Getting-started/Installing-pytop",children:"this page"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:"mpi-parallelization",children:"MPI parallelization"}),"\n",(0,n.jsxs)(e.p,{children:["This software is designed as parallelization-ready. Problem is automatically divided into partial problems and computed in each cpus. We provide useful detaclass for MPI, ",(0,n.jsx)(e.code,{children:"MPI_Communicator"}),". You can construct a mpi group use this class,"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-python",children:"import pytop as pt\r\ncomm_group = pt.MPI_Communicator.comm_world\n"})}),"\n",(0,n.jsxs)(e.p,{children:["Single problem must be in the same group. Then, ",(0,n.jsx)(e.code,{children:"mpirun"})," executes the solving with cpus you mentioned:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:"mpirun -n 36 python your_problem.py\n"})}),"\n",(0,n.jsx)(e.p,{children:"In the container, you need to give option to allow run as a root user:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:"mpirun -n 36 --allow-run-as-root python your_problem.py\n"})}),"\n",(0,n.jsx)(e.p,{children:"Above example use 36 cpus."}),"\n",(0,n.jsx)(e.h2,{id:"working-with-pygmsh",children:"Working with pygmsh"}),"\n",(0,n.jsxs)(e.p,{children:["You can use ",(0,n.jsx)(e.code,{children:"pygmsh"})," as mesh generator.\r\nDocumentation of ",(0,n.jsx)(e.code,{children:"pygmsh"})," is available ",(0,n.jsx)(e.a,{href:"https://pygmsh.readthedocs.io/en/latest/",children:"here"}),"."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-python",children:"import pytop as pt\r\nimport pygmsh\r\n\r\nwith pygmsh.geo.Geometry() as geom:\r\n    lcar = 0.1\r\n    p1 = geom.add_point([0.0, 0.0], lcar)\r\n    p2 = geom.add_point([1.0, 0.0], lcar)\r\n    p3 = geom.add_point([1.0, 0.5], lcar)\r\n    p4 = geom.add_point([1.0, 1.0], lcar)\r\n    s1 = geom.add_bspline([p1, p2, p3, p4])\r\n\r\n    p2 = geom.add_point([0.0, 1.0], lcar)\r\n    p3 = geom.add_point([0.5, 1.0], lcar)\r\n    s2 = geom.add_spline([p4, p3, p2, p1])\r\n\r\n    ll = geom.add_curve_loop([s1, s2])\r\n    pl = geom.add_plane_surface(ll)\r\n\r\n    mesh = geom.generate_mesh()\r\n\r\nmesh = pt.from_pygmsh(mesh)\n"})}),"\n",(0,n.jsxs)(e.p,{children:["Use ",(0,n.jsx)(e.code,{children:"planation"})," option is used, all ",(0,n.jsx)(e.code,{children:"z"})," coordinates will be neglected."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-python",children:"mesh = pt.from_pygmsh(mesh, planation=True)\n"})})]})}function d(s={}){const{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(o,{...s})}):o(s)}},8453:(s,e,a)=>{a.d(e,{R:()=>t,x:()=>r});var n=a(6540);const i={},l=n.createContext(i);function t(s){const e=n.useContext(l);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:t(s.components),n.createElement(l.Provider,{value:e},s.children)}}}]);